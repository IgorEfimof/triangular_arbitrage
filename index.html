<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Арбитражная вилка</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .form-container,
        .results-section,
        .bank-section {
            background-color: #1c1c1c;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 600px;
            margin-top: 20px;
        }

        .form-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .form-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            padding: 10px;
            border-radius: 5px;
        }

        .form-item label {
            font-size: 14px;
        }

        .form-item input {
            background-color: #222;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 5px;
            font-size: 14px;
            width: 60px;
            text-align: center;
        }

        .results-section div {
            margin-bottom: 8px;
        }

        .bank-section label {
            font-size: 16px;
        }

        .bank-section input {
            margin-left: 10px;
            width: 120px;
            padding: 8px;
            border-radius: 5px;
            background-color: #222;
            color: #fff;
            border: 1px solid #444;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .button-container button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #444;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .button-container button:hover {
            background-color: #555;
        }

        @media (max-width: 480px) {
            .form-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <div class="bank-section">
        <label for="bankAmount">Банк (₽):</label>
        <input type="number" id="bankAmount" placeholder="Введите сумму банка">
    </div>

    <!-- Форма для ввода коэффициентов -->
    <form class="form-container">
        <div class="form-item"><label for="field1">1</label><input type="text" id="field1"></div>
        <div class="form-item"><label for="field2">2</label><input type="text" id="field2"></div>
        <div class="form-item"><label for="field3">ТМ (16.5)</label><input type="text" id="field3"></div>
        <div class="form-item"><label for="field4">ТБ (16.5)</label><input type="text" id="field4"></div>
        <div class="form-item"><label for="field5">ТМ (17.5)</label><input type="text" id="field5"></div>
        <div class="form-item"><label for="field6">ТБ (17.5)</label><input type="text" id="field6"></div>
        <div class="form-item"><label for="field7">ТМ (18.5)</label><input type="text" id="field7"></div>
        <div class="form-item"><label for="field8">ТБ (18.5)</label><input type="text" id="field8"></div>
        <div class="form-item"><label for="field9">ТМ (19.5)</label><input type="text" id="field9"></div>
        <div class="form-item"><label for="field10">ТБ (19.5)</label><input type="text" id="field10"></div>
        <div class="form-item"><label for="field11">ТМ (20.5)</label><input type="text" id="field11"></div>
        <div class="form-item"><label for="field12">ТБ (20.5)</label><input type="text" id="field12"></div>
        <div class="form-item"><label for="field13">Чет</label><input type="text" id="field13"></div>
        <div class="form-item"><label for="field14">Нечет</label><input type="text" id="field14"></div>
    </form>

    <div class="results-section" id="results"></div>

    <div class="button-container">
        <button id="calculateButton">Рассчитать</button>
        <button id="clearButton">Очистить форму</button>
    </div>

    <script>
        function parseVal(id) {
            const val = parseFloat(document.getElementById(id).value.replace(',', '.'));
            return isNaN(val) ? null : val;
        }

        function clearHighlights() {
            document.querySelectorAll('input').forEach(input => {
                input.style.backgroundColor = '#222';
            });
        }

        function clearForm() {
            document.querySelectorAll('input').forEach(input => {
                input.value = '';
                input.style.backgroundColor = '#222';
            });
            document.getElementById('results').innerHTML = '';
        }

        function calculateArbitrage(group, bank) {
            const [f1, f2, f3] = group;
            const k1 = parseVal(f1);
            const k2 = parseVal(f2);
            const k3 = parseVal(f3);

            if (!k1 || !k2 || !k3) return null;

            const totalInverse = (1 / k1) + (1 / k2) + (1 / k3);
            if (totalInverse >= 1) return null;

            const stake1 = (bank / k1) / totalInverse;
            const stake2 = (bank / k2) / totalInverse;
            const stake3 = (bank / k3) / totalInverse;
            const profit = (bank / totalInverse - bank).toFixed(2);

            return { stake1, stake2, stake3, profit };
        }

        function checkArbitrage() {
            clearHighlights();
            const bank = parseVal('bankAmount');
            if (!bank) {
                alert('Введите сумму банка!');
                return;
            }

            const arbitrageGroups = [
                ['field1', 'field2', 'field13'],
                ['field3', 'field4', 'field14'],
                ['field5', 'field6', 'field7'],
            ];

            for (let group of arbitrageGroups) {
                const result = calculateArbitrage(group, bank);
                if (result) {
                    const { stake1, stake2, stake3, profit } = result;
                    document.getElementById('results').innerHTML = `
                        <div><strong>Вилка найдена!</strong></div>
                        <div>Ставка на ${group[0]}: <b>${stake1.toFixed(2)} ₽</b></div>
                        <div>Ставка на ${group[1]}: <b>${stake2.toFixed(2)} ₽</b></div>
                        <div>Ставка на ${group[2]}: <b>${stake3.toFixed(2)} ₽</b></div>
                        <div style="color: #22c55e;">Гарантированная прибыль: <b>${profit} ₽</b></div>
                    `;
                    group.forEach(id => document.getElementById(id).style.backgroundColor = '#14532d');
                    return;
                }
            }

            document.getElementById('results').innerHTML = '<div>Вилка не найдена.</div>';
        }

        function autoFormatAndMove(event) {
            const input = event.target;
            const value = input.value;

            // Если введена первая цифра, добавляем точку
            if (value.length === 1 && !value.includes('.')) {
                input.value = value + '.';
            }

            // Если введено 3 символа, переходим к следующему полю
            if (value.length === 4) {
                const formElements = Array.from(document.querySelectorAll('.form-container input'));
                const currentIndex = formElements.indexOf(input);
                if (currentIndex !== -1 && currentIndex < formElements.length - 1) {
                    formElements[currentIndex + 1].focus();
                }
            }
        }

        document.querySelectorAll('.form-container input').forEach(input => {
            input.addEventListener('input', autoFormatAndMove);
        });

        document.getElementById('calculateButton').addEventListener('click', checkArbitrage);
        document.getElementById('clearButton').addEventListener('click', clearForm);
    </script>
</body>

</html>




