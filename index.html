<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Арбитражная вилка</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .form-container,
        .results-section,
        .bank-section {
            background-color: #1c1c1c;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 600px;
            margin-top: 20px;
        }

        .form-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .form-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            padding: 10px;
            border-radius: 5px;
        }

        .form-item label {
            font-size: 14px;
        }

        .form-item input {
            background-color: #222;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 5px;
            font-size: 14px;
            width: 60px;
            text-align: center;
        }

        .results-section div {
            margin-bottom: 8px;
        }

        .bank-section label {
            font-size: 16px;
        }

        .bank-section input {
            margin-left: 10px;
            width: 120px;
            padding: 8px;
            border-radius: 5px;
            background-color: #222;
            color: #fff;
            border: 1px solid #444;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .button-container button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #444;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .button-container button:hover {
            background-color: #555;
        }

        @media (max-width: 480px) {
            .form-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <div class="bank-section">
        <label for="bankAmount">Банк (₽):</label>
        <input type="number" id="bankAmount" placeholder="Введите сумму банка" inputmode="numeric">
    </div>

    <!-- Форма для ввода коэффициентов -->
    <form class="form-container">
        <div class="form-item"><label for="field1">1</label><input type="text" id="field1" inputmode="numeric"></div>
        <div class="form-item"><label for="field2">2</label><input type="text" id="field2" inputmode="numeric"></div>
        <div class="form-item"><label for="field3">ТМ (16.5)</label><input type="text" id="field3" inputmode="numeric"></div>
        <div class="form-item"><label for="field4">ТБ (16.5)</label><input type="text" id="field4" inputmode="numeric"></div>
        <div class="form-item"><label for="field5">ТМ (17.5)</label><input type="text" id="field5" inputmode="numeric"></div>
        <div class="form-item"><label for="field6">ТБ (17.5)</label><input type="text" id="field6" inputmode="numeric"></div>
        <div class="form-item"><label for="field7">ТМ (18.5)</label><input type="text" id="field7" inputmode="numeric"></div>
        <div class="form-item"><label for="field8">ТБ (18.5)</label><input type="text" id="field8" inputmode="numeric"></div>
        <div class="form-item"><label for="field9">ТМ (19.5)</label><input type="text" id="field9" inputmode="numeric"></div>
        <div class="form-item"><label for="field10">ТБ (19.5)</label><input type="text" id="field10" inputmode="numeric"></div>
        <div class="form-item"><label for="field11">ТМ (20.5)</label><input type="text" id="field11" inputmode="numeric"></div>
        <div class="form-item"><label for="field12">ТБ (20.5)</label><input type="text" id="field12" inputmode="numeric"></div>
        <div class="form-item"><label for="field13">Чет</label><input type="text" id="field13" inputmode="numeric"></div>
        <div class="form-item"><label for="field14">Нечет</label><input type="text" id="field14" inputmode="numeric"></div>
    </form>

    <div class="results-section" id="results"></div>

    <div class="button-container">
        <button type="button" id="calculateButton">Рассчитать</button>
        <button type="button" id="clearButton">Очистить форму</button>
    </div>

    <script>
        function parseVal(id) {
            const val = parseFloat(document.getElementById(id).value.replace(',', '.'));
            return isNaN(val) ? null : val;
        }

        function clearHighlights() {
            document.querySelectorAll('input').forEach(input => {
                input.style.backgroundColor = '#222';
            });
        }

        function clearForm() {
            document.querySelectorAll('input').forEach(input => {
                input.value = '';
                input.style.backgroundColor = '#222';
            });
            document.getElementById('results').innerHTML = '';
        }

        function calculateArbitrage(bank, coefficients) {
            let bestArbitrage = null;

            for (let i = 0; i < coefficients.length; i++) {
                for (let j = i + 1; j < coefficients.length; j++) {
                    for (let k = j + 1; k < coefficients.length; k++) {
                        const [field1, k1] = coefficients[i];
                        const [field2, k2] = coefficients[j];
                        const [field3, k3] = coefficients[k];

                        const totalInverse = (1 / k1) + (1 / k2) + (1 / k3);

                        if (totalInverse < 1) {
                            const stake1 = (bank / k1) / totalInverse;
                            const stake2 = (bank / k2) / totalInverse;
                            const stake3 = (bank / k3) / totalInverse;
                            const profit = (bank / totalInverse - bank).toFixed(2);

                            if (!bestArbitrage || profit > bestArbitrage.profit) {
                                bestArbitrage = {
                                    fields: [field1, field2, field3],
                                    stakes: [stake1, stake2, stake3],
                                    profit: profit,
                                };
                            }
                        }
                    }
                }
            }

            return bestArbitrage;
        }

        function checkArbitrage() {
            clearHighlights();
            const bank = parseVal('bankAmount');
            if (!bank) {
                alert('Введите сумму банка!');
                return;
            }

            const coefficients = [];
            for (let i = 1; i <= 14; i++) {
                const field = `field${i}`;
                const value = parseVal(field);
                if (value) coefficients.push([field, value]);
            }

            const bestArbitrage = calculateArbitrage(bank, coefficients);
            const results = document.getElementById('results');

            if (bestArbitrage) {
                const { fields, stakes, profit } = bestArbitrage;

                results.innerHTML = `
                    <div><strong>Вилка найдена!</strong></div>
                    <div>Ставка на ${fields[0]}: <b>${stakes[0].toFixed(2)} ₽</b></div>
                    <div>Ставка на ${fields[1]}: <b>${stakes[1].toFixed(2)} ₽</b></div>
                    <div>Ставка на ${fields[2]}: <b>${stakes[2].toFixed(2)} ₽</b></div>
                    <div style="color: #22c55e;">Гарантированная прибыль: <b>${profit} ₽</b></div>
                `;

                fields.forEach(field => {
                    document.getElementById(field).style.backgroundColor = '#14532d';
                });
            } else {
                results.innerHTML = '<div>Вилка не найдена.</div>';
            }
        }

        function autoFormatAndMove(event) {
            const input = event.target;
            const value = input.value;

            if (value.length === 1 && !value.includes('.')) {
                input.value = value + '.';
            }

            if (value.length === 4) {
                const formElements = Array.from(document.querySelectorAll('.form-container input'));
                const currentIndex = formElements.indexOf(input);
                if (currentIndex !== -1 && currentIndex < formElements.length - 1) {
                    formElements[currentIndex + 1].focus();
                }
            }
        }

        document.querySelectorAll('.form-container input').forEach(input => {
            input.addEventListener('input', autoFormatAndMove);
        });

        document.getElementById('calculateButton').addEventListener('click', checkArbitrage);
        document.getElementById('clearButton').addEventListener('click', clearForm);
    </script>

</body>
</html>






